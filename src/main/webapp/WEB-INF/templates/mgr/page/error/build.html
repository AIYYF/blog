<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="_csrf" th:content="${_csrf.token}" />
<meta name="_csrf_header" th:content="${_csrf.headerName}" />
<link
	href="http://cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap.min.css"
	rel="stylesheet">
<link rel="stylesheet"
	href="//cdn.bootcss.com/startbootstrap-sb-admin-2/3.3.7+1/css/sb-admin-2.css">
<link rel="stylesheet"
	th:href="@{/static/editor/markdown/css/editormd.css}" />
<link th:href="@{/static/css/blog.css}" rel="stylesheet">
<!--[if lt IE 9]>
  <script src="//cdn.bootcss.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  <script src="//cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->
<style type="text/css">
.table-borderless tbody tr td, .table-borderless tbody tr th,
	.table-borderless thead tr th {
	border: none;
}

.cm-tab {
	background: none !important;
}
</style>
<title>错误页面模板编辑</title>
</head>
<body>
	<nav th:replace="mgr/base/nav :: active('tpl-error')"></nav>
	<div id="page-wrapper" style="padding: 10px">
		<div class="container-fluid">
			<div class="row">
				<div class="col-md-12">
					<div id="editor">
						<textarea rows="" cols="" class="form-control"
							style="display: none" th:text="${page.tpl}"></textarea>
					</div>
				</div>
				<div class="col-md-12 " style="margin-top: 10px; text-align: center">
					<form style="display: none" id="tplForm">
						<input type="hidden"
							th:value="${page.space == null ? '' : page.space.id}" id="space">
						<input type="hidden" th:value="${page.errorCode}" id="errorCode">
						<input type="hidden" th:value="${page.id}" id="pageId">
					</form>
					<button class="btn btn-primary" type="button" data-toggle="modal"
						data-target="#allWidgetsModal">挂件浏览</button>
					<button class="btn btn-primary" type="button" data-toggle="modal"
						data-target="#widgetsModal">当前挂件</button>
					<button class="btn btn-primary" type="button" onclick="preview()">预览</button>
					<button class="btn btn-primary" type="button" onclick="save()">提交</button>
				</div>
			</div>
		</div>
	</div>
	<div th:replace="base/foot_source"></div>
	<div class="modal " id="widgetsModal" tabindex="-1" role="dialog"
		aria-labelledby="widgetsLabel">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h4 class="modal-title" id="widgetsModalLabel">挂件</h4>
				</div>
				<div class="modal-body">
					<div class="tip"></div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
				</div>
			</div>
		</div>
	</div>

	<div class="modal " id="allWidgetsModal" tabindex="-1" role="dialog">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h4 class="modal-title">所有挂件</h4>
				</div>
				<div class="modal-body">
					<ul id="myTab" class="nav nav-tabs" role="tablist">
						<li role="presentation" class="active"><a href="#sys"
							id="sys-tab" role="tab" data-toggle="tab" aria-controls="home"
							aria-expanded="true">系统挂件</a></li>
						<li role="presentation"><a href="#user" role="tab"
							id="user-tab" data-toggle="tab" aria-controls="profile">自定义挂件</a></li>
					</ul>
					<div id="myTabContent" class="tab-content">
						<div role="tabpanel" class="tab-pane fade in active" id="sys"
							aria-labelledby="sys-tab">
							<img th:src="@{/static/img/loading.gif}"
								class="img-responsive center-block" />
						</div>
						<div role="tabpanel" class="tab-pane fade" id="user"
							aria-labelledby="user-tab">
							<img th:src="@{/static/img/loading.gif}"
								class="img-responsive center-block" />
						</div>
					</div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
				</div>
			</div>
		</div>
	</div>

	<div class="modal " id="widgetTplEditModal" tabindex="-1" role="dialog"
		aria-labelledby="widgetTplEdiModalLabel">
		<div class="modal-dialog modal-lg" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h4 class="modal-title" id="widgetTplEdiModalLabel"></h4>
				</div>
				<div class="modal-body">
					<div class="tip"></div>
					<div id="widgetTplEditor">
						<textarea style="display: none"></textarea>
					</div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
					<button type="button" class="btn btn-primary" id="tpl-save-btn">保存</button>
				</div>
			</div>
		</div>
	</div>
	<script th:src="@{/static/editor/markdown/editormd.min.js}"></script>
	<script type="text/javascript"
		th:src="@{/static/js/mgr/tplbuild_error.js}"></script>
</body>
</html>
